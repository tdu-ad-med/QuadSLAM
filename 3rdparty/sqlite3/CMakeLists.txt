cmake_minimum_required(VERSION 3.13)
project(sqlite3)
find_package(Threads REQUIRED)
add_library(sqlite3 STATIC sqlite3.c)
target_include_directories(sqlite3 PRIVATE ${CMAKE_CURRENT_SOURCE_DIR})
target_link_libraries(sqlite3 Threads::Threads ${CMAKE_DL_LIBS})
install(TARGETS sqlite3 DESTINATION lib COMPONENT libraries)
install(FILES sqlite3.h DESTINATION include COMPONENT headers)

if (MSVC)
	set(CMAKE_C_FLAGS_DEBUG "${CMAKE_CXX_FLAGS_DEBUG} /MTd")
	set(CMAKE_C_FLAGS_RELEASE "${CMAKE_CXX_FLAGS_RELEASE} /MT")
	set(CMAKE_CXX_FLAGS_DEBUG "${CMAKE_CXX_FLAGS_DEBUG} /MTd")
	set(CMAKE_CXX_FLAGS_RELEASE "${CMAKE_CXX_FLAGS_RELEASE} /MT")
endif()
